<% 
extraStyles=`
<link rel="stylesheet" href="css/sidebar.css" />
<style>
  .app-container { display:flex; min-height: 100vh; }
  .main-content { flex:1; padding:20px; background: linear-gradient(135deg,#f5f7fa 0%,#c3cfe2 100%); }
  .content-header { background:#fff; border-radius:15px; padding:25px; margin-bottom:20px; box-shadow:0 4px 6px rgba(0,0,0,.1); border-left:5px solid #7c1241; }
  .content-header h3 { margin:0; display:flex; align-items:center; gap:12px; color:#2c3e50; font-weight:600; }
  .content-header .icon { background: linear-gradient(135deg,#7c1241,#9c1a5a); color:#fff; padding:12px; border-radius:12px; }
  .table-container { background:#fff; border-radius:15px; padding:20px; box-shadow:0 4px 6px rgba(0,0,0,.1); }
  .status-badge { padding:6px 12px; border-radius:20px; font-size:.8rem; display:inline-block; }
  .status-resguardo { background:#f3e8ff; color:#7c1241; }
</style>
`;
%>

<div class="app-container">
  <%- include('../components/sidebar', { 
    currentPage: '/gestionambiental/notificaciones', 
    pageTitle: 'Notificaciones - Gestión Ambiental', 
    isAdmin: true
  }) %>

  <main class="main-content">
    <div class="content-header">
      <div class="d-flex justify-content-between align-items-start">
        <div>
          <h3><i class="fas fa-bell icon"></i> Notificaciones</h3>
          <p class="text-muted mb-0 mt-2">Trámites en "Resguardo para notificar"</p>
        </div>
      </div>
    </div>

    <div class="table-container">
      <div class="d-flex flex-wrap gap-2 justify-content-between align-items-center mb-2">
        <div class="text-muted small">Solo se muestran trámites con status: Resguardo para notificar</div>
        <div class="d-flex gap-2 align-items-center">
          <div class="input-group input-group-sm" style="min-width:280px;">
            <span class="input-group-text"><i class="fas fa-search"></i></span>
            <input id="txtBuscar" type="text" class="form-control" placeholder="Buscar por folio u observaciones..." />
            <button id="btnBuscar" class="btn btn-outline-primary"><i class="fas fa-search"></i></button>
          </div>
        </div>
      </div>
      <div class="table-responsive">
        <table class="table align-middle mb-0">
          <thead>
            <tr>
              <th class="text-center">Folio</th>
              <th>Empresa</th>
              <th class="text-center">Fecha Entrada</th>
              <th class="text-center">Tipo</th>
              <th class="text-center">Asunto</th>
              <th class="text-center">Status</th>
              <th class="text-center">Acciones</th>
            </tr>
          </thead>
          <tbody id="tablaNotificaciones">
            <tr><td colspan="7" class="text-center text-muted">Cargando...</td></tr>
          </tbody>
        </table>
      </div>
      <div class="d-flex flex-wrap justify-content-between align-items-center mt-3 gap-2">
        <div class="small text-muted" id="resumenNoti">Mostrando 0 de 0</div>
        <nav aria-label="Paginación de notificaciones">
          <ul id="paginacionNoti" class="pagination pagination-sm mb-0">
            <!-- Paginación renderizada por JS -->
          </ul>
        </nav>
      </div>
    </div>
  </main>
</div>

<!-- Scripts -->
<script src="js/components/sidebar.js"></script>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="/socket.io/socket.io.js"></script>
<script src="/js/gestionambiental/notificaciones.js?v=1"></script>
