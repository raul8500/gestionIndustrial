<% extraStyles=``; %>

    <main style="margin-top: 20px">
        <div class="container pt-4">
            <h3 class="text-center">
                <i class="fas fa-users"></i> Gestión de Usuarios
            </h3>

            <div class="d-flex justify-content-end mb-3">
                <button id="btnNuevoUsuario" class="btn" data-toggle="modal" data-target="#modalUsuario"
                    style="background-color: #7c1241; color: white;">
                    <i class="fas fa-user-plus"></i> Registrar usuario
                </button>
            </div>

            <div class="tab-content">
                <div class="table-responsive pt-3">
                    <table id="tablaUsuarios" class="table align-middle mb-0 bg-white">
                        <thead class="bg-light text-center">
                            <tr>
                                <th>No.</th>
                                <th>Nombre</th>
                                <th>Usuario</th>
                                <th>Estado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>
    </main>

    <!-- Modal -->
    <div class="modal fade" id="modalUsuario" tabindex="-1" role="dialog" aria-labelledby="modalUsuarioLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <form id="formUsuario">
                <div class="modal-content">
                    <div class="modal-header text-white">
                        <h5 class="modal-title" id="modalUsuarioLabel" style="color: black;">Registrar usuario</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>

                    <div class="modal-body row g-3">
                        <input type="hidden" id="usuarioId">

                        <div class="col-md-12">
                            <label>Nombre completo</label>
                            <input type="text" id="nameControl" class="form-control" required>
                        </div>

                        <div class="col-md-12">
                            <label>Usuario</label>
                            <input type="text" id="username" class="form-control" required autocomplete="off">
                        </div>

                        <div class="col-md-12">
                            <label>Contraseña</label>
                            <input type="password" id="password" class="form-control" required autocomplete="new-password" autocapitalize="off">
                        </div>

                        <div class="col-md-12">
                            <label>Confirmar contraseña</label>
                            <input type="password" id="confirmPassword" class="form-control" required autocomplete="new-password" autocapitalize="off" >
                        </div>
                        
                        <div id="requisitosPassword" class="ml-2 mt-2">
                            <small id="minCaracteres" class="text-danger">• Al menos 5 caracteres</small><br>
                            <small id="unaMayuscula" class="text-danger">• Al menos una letra mayúscula</small><br>
                            <small id="unNumero" class="text-danger">• Al menos un número</small><br>
                            <small id="coinciden" class="text-danger">• Las contraseñas deben coincidir</small>
                        </div>

                        <div class="col-md-12">
                            <label>Estado</label>
                            <select id="status" class="form-control" required>
                                <option value="1">Activo</option>
                                <option value="0">Inactivo</option>
                            </select>
                        </div>
                    </div>

                    <div class="modal-footer">
                        <button type="submit" class="btn"
                            style="background-color: #7c1241; color: white;">Guardar</button>
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal para cambiar contraseña -->
    <div class="modal fade" id="modalPassword" tabindex="-1" role="dialog" aria-labelledby="modalPasswordLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <form id="formPasswordCambio">
        <div class="modal-content">
            <div class="modal-header text-white">
            <h5 class="modal-title" id="modalPasswordLabel" style="color: black;">Cambiar contraseña</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>

            <div class="modal-body row g-3">
            <input type="hidden" id="cambioPasswordId">

            <div class="col-md-12">
                <label>Nueva contraseña</label>
                <input type="password" id="passwordCambio" class="form-control" required autocomplete="off" autocapitalize="off">
            </div>

            <div class="col-md-12">
                <label>Confirmar nueva contraseña</label>
                <input type="password" id="confirmPasswordCambio" class="form-control" required autocomplete="off" autocapitalize="off">
            </div>

            <div id="requisitosCambioPassword" class="ml-2 mt-2">
                <small id="minCaracteresCambio" class="text-danger">• Al menos 5 caracteres</small><br>
                <small id="unaMayusculaCambio" class="text-danger">• Al menos una letra mayúscula</small><br>
                <small id="unNumeroCambio" class="text-danger">• Al menos un número</small><br>
                <small id="coincidenCambio" class="text-danger">• Las contraseñas deben coincidir</small>
            </div>
            </div>

            <div class="modal-footer">
            <button type="submit" class="btn" style="background-color: #7c1241; color: white;">Guardar</button>
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
            </div>
        </div>
        </form>
    </div>
    </div>

    <!-- Modal Editar Usuario -->
    <div class="modal fade" id="modalEditarUsuario" tabindex="-1">
    <div class="modal-dialog">
        <form id="formEditarUsuario" class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title">Editar Usuario</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
            <input type="hidden" id="editUsuarioId">
            <div class="form-group">
            <label>Nombre</label>
            <input type="text" id="editName" class="form-control" required>
            </div>
            <div class="form-group">
            <label>Usuario</label>
            <input type="text" id="editUsername" class="form-control" required>
            </div>
            <div class="form-group">
            <label>Estatus</label>
            <select id="editStatus" class="form-control">
                <option value="1">Activo</option>
                <option value="0">Inactivo</option>
            </select>
            </div>
        </div>
        <div class="modal-footer">
            <button type="submit" class="btn" style="background-color: #7c1241; color: white;">Guardar</button>            
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" style="color: #7c1241;">Cancelar</button>
        </div>
        </form>
    </div>
    </div>



    <% extraScripts=` <script src="/js/financieros/usuarios.js">
        </script>
        `; %>