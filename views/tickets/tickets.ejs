<% extraStyles=``; %>

<main style="margin-top: 20px">
    <div class="container pt-4">
        <h3 class="text-center">
            <i class="fa-solid fa-paperclip"></i> Gestión de tickets TICS
        </h3>

        <div class="d-flex justify-content-end mb-3 gap-2">
            <button id="btnNuevoTicket" class="btn" data-toggle="modal" data-target="#modalTicket" style="background-color: #7c1241; color: white;">
                <i class="fas fa-plus"></i> Registrar ticket
            </button>
        
            <button id="btnReporte" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#modalReporte">
                <i class="fas fa-file-pdf"></i> Generar reporte
              </button>
              
        </div>
        

        <div class="table-responsive pt-3">
            <table id="tablaRegistros" class="table align-middle mb-0 bg-white">
                <thead class="bg-light">
                    <tr class="text-center">
                        <th>#</th>
                        <th>Título</th>
                        <th>Solicitante</th>
                        <th>Estado</th>
                        <th>Prioridad</th>
                        <th>Fecha Creación</th>
                        <th>Observaciones</th>
                        <th>Acciones</th>
                    </tr>
                </thead>                        
                <tbody>
                </tbody>
            </table>
        </div>
    </div>
</main>

<!-- Modal -->
<div class="modal fade" id="modalTicket" tabindex="-1" role="dialog" aria-labelledby="modalTicketLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <form id="formTicket">
        <input type="hidden" name="_id"> <!-- oculto para edición -->
        <div class="modal-content">
          <div class="modal-header text-white">
            <h5 class="modal-title" id="modalTicketLabel" style="color: black;">Registrar nuevo ticket</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>

          <div class="modal-body row g-3">
            <div class="col-md-6">
              <label>Título</label>
              <input type="text" name="titulo" class="form-control" required autocomplete="off">
            </div>
            <div class="col-md-6">
              <label>Solicitante</label>
              <input type="text" name="solicitante" class="form-control" required autocomplete="off">
            </div>
            <div class="col-md-12">
              <label>Descripción</label>
              <textarea name="descripcion" class="form-control" rows="3" required autocomplete="off"></textarea>
            </div>
            <div class="col-md-6">
              <label>Estado</label>
              <select class="form-control" name="estado" required>
                <option value="0">Abierto</option>
                <option value="1">En proceso</option>
                <option value="2">Cerrado</option>
              </select>
            </div>
            <div class="col-md-6">
              <label>Prioridad</label>
              <select class="form-control" name="prioridad" required>
                <option value="0">Baja</option>
                <option value="1">Media</option>
                <option value="2">Alta</option>
              </select>
            </div>
            <div class="col-md-12">
              <label>Observaciones</label>
              <textarea name="observaciones" class="form-control" rows="2" autocomplete="off"></textarea>
            </div>
          </div>

          <div class="modal-footer">
            <button type="submit" class="btn" style="background-color: #7c1241; color: white;">Guardar</button>
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
          </div>
        </div>
      </form>
    </div>
</div>

<!-- Modal Reporte -->
<div class="modal fade" id="modalReporte" tabindex="-1" aria-labelledby="modalReporteLabel" aria-hidden="true">
    <div class="modal-dialog">
      <form id="formReporte">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="modalReporteLabel">Generar reporte de tickets</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <div class="mb-3">
              <label>Fecha inicio</label>
              <input type="date" name="fechaInicio" class="form-control" required>
            </div>
            <div class="mb-3">
              <label>Fecha fin</label>
              <input type="date" name="fechaFin" class="form-control" required>
            </div>
          </div>
          <div class="modal-footer">
            <button type="submit" class="btn btn-success"><i class="fas fa-file-pdf"></i> Generar PDF</button>
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
          </div>
        </div>
      </form>
    </div>
  </div>
  


<% extraScripts=` 
<script src="js/tickets/tickets.js"></script>
`; %>
